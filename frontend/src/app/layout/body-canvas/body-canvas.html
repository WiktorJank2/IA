<div class="canvas-wrap" style="display:inline-block; border:1px solid #ddd;">
    <canvas
        #myCanvas
        width="800"
        height="500"
        (mousemove)="onMouseMove($event)"
        (mouseleave)="onMouseLeave()"
        (click)="addPoint()"
    ></canvas>
</div>

<div class="controls" style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
    <button type="button" (click)="saveCollectedAsPolygon()" [disabled]="collected.length < 3">
        Zapisz zebrane punkty jako element
    </button>

    <button type="button" (click)="clearPoints()" [disabled]="collected.length === 0">
        Wyczyść zebrane punkty
    </button>

    <button type="button" (click)="nudgeAllLeft()">
        Przesuń wszystkie elementy w lewo (-10px)
    </button>
</div>

<div class="coords" style="margin-top:8px;">
    <strong>Pozycja kursora:</strong>
    x: {{ hover?.x ?? '-' }} | y: {{ hover?.y ?? '-' }}
</div>

<div class="points" style="margin-top:12px;">
    <strong>Zebrane punkty (klikaj na canvas):</strong>
    <span *ngIf="collected.length === 0"> — </span>

    <ul *ngIf="collected.length">
        <li *ngFor="let p of collected; let i = index">
            #{{ i + 1 }}: ({{ p.x }}, {{ p.y }})
        </li>
    </ul>

    <details *ngIf="collected.length" style="margin-top:8px;">
        <summary>Pokaż JSON zebranych punktów</summary>
        <pre>{{ collected | json }}</pre>
    </details>
</div>

<div class="polys" style="margin-top:12px;">
    <strong>Elementy (polygons):</strong>
    <span> {{ polygons.length }} </span>

    <details style="margin-top:8px;">
        <summary>Pokaż JSON wszystkich elementów</summary>
        <pre>{{ polygons | json }}</pre>
    </details>
</div>
