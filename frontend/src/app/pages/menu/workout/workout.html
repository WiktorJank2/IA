

<div class="flex mt-8">
    <div class="card flex flex-col gap-6 w-full h-240">
        <div class="font-semibold text-xl w-full"></div>
        <p-iconfield iconPosition="left">
            <input pInputText type="text" placeholder="Enter Workout Name"
                   [(ngModel)]="workout.name"
                   [style]="{'width': '100%', 'height': '40px', 'font-size': '18px' }"
            />

        </p-iconfield>

        <div class="flex flex-col gap-6">
        <div class=" flex flex-row gap-6 w-full h-140">
            <div class=" flex flex-col gap-6 w-500 h-230">
                <div class="font-semibold text-xl mb-4 flex justify-center">
                    SELECTED EXERCISES
                </div>
                <div *ngIf="workout">
                    <p-table
                        #dt1
                        [value]="selectedExercises"
                        dataKey="id"
                        [rows]="10"
                        [loading]="loading"
                        [rowHover]="true"
                        [showGridlines]="true"
                        [paginator]="true"
                        [globalFilterFields]="['name']"
                        responsiveLayout="scroll"
                    >
                        <!-- Caption -->
                        <ng-template #caption>
                            <div class="flex justify-between items-center flex-column sm:flex-row ">
                                <button pButton label="Clear" class="p-button-outlined mb-2" icon="pi pi-filter-slash" (click)="clear()"></button>
                                <p-iconfield iconPosition="left" class="ml-auto">
                                    <p-inputicon>
                                        <i class="pi pi-search"></i>
                                    </p-inputicon>
                                    <input pInputText type="text" (input)="onGlobalFilter($event)" placeholder="Search exercises" />
                                </p-iconfield>
                            </div>
                        </ng-template>

                        <!-- Header -->
                        <ng-template #header>
                            <tr>
                                <th>Name</th>
                                <th>Number of Sets</th>
                                <th>Number of Repetitions</th>
                                <th>Actions</th>
                            </tr>
                        </ng-template>

                        <!-- Body -->
                        <ng-template #body let-workoutExercise let-rowIndex="rowIndex">
                            <tr>
                                <td (click)="goToExercise(workoutExercise.exercise.id)" style="cursor: pointer; text-decoration: underline; color: blue;">
                                    {{ workoutExercise.exercise.name }}
                                </td>
                                <td><input pInputText type="number" min="1" [(ngModel)]="workoutExercise.sets" style="width: 60px" /></td>
                                <td><input pInputText type="number" min="1" [(ngModel)]="workoutExercise.reps" style="width: 60px" /></td>
                                <td>
                                    <button pButton type="button" icon="pi pi-trash" class="p-button-danger p-button-rounded p-button-sm"
                                            (click)="removeExercise(rowIndex)">
                                    </button>
                                </td>
                            </tr>
                        </ng-template>

                        <!-- No exercises message -->
                        <ng-template #emptymessage>
                            <tr>
                                <td colspan="4">No exercises added yet.</td>
                            </tr>
                        </ng-template>

                        <!-- Loading message -->
                        <ng-template #loadingbody>
                            <tr>
                                <td colspan="4">Loading exercises. Please wait.</td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>

            </div>

            <div style="width: 100%">
                <p-autoComplete
                    [(ngModel)]="selectedAutoValue"
                    [suggestions]="autoFilteredValue"
                    (completeMethod)="filterExercise($event)"
                    (onSelect)="onExerciseSelect($event)"
                    [style]="{ width: '100%' }"
                    [inputStyle]="{ width: '100%', height: '40px', 'font-size': '16px' }"
                    placeholder="SEARCH EXERCISES TO ADD">
                </p-autoComplete>
            </div>
            <div class=" flex justify-center ">
            <div class="flex flex-wrap gap-2">
                <p-button label="SAVE WORKOUT" rounded
                          [style]="{'width': '250px', 'height': '50px', 'font-size': '18px' }"
                          (click)="saveWorkout()"
                />
            </div>
            </div>
            <div class=" flex justify-center ">
                <div class="font-semibold text-xl"></div>
                <div class="flex flex-wrap gap-2 mb-10">
                    <p-button label="EXIT" rounded
                              [style]="{'width': '80px', 'height': '40px', 'font-size': '18px' }"
                              [routerLink]="['/']"
                    />
                </div>
            </div>
    </div>
    </div>
</div>
